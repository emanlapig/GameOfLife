function shuffle(a){for(var b,c,d=a.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,b=a[d],a[d]=a[c],a[c]=b;return a}function random(a,b){var c=b-a;return Math.floor(Math.random()*c+a)}var favorites=window.localStorage.getItem("GoL_colors"),UI={btns:{},btn_functions:{options_open:!1,toggle_options:function(){if(UI.btn_functions.options_open){var a=document.getElementById("menu");a.setAttribute("class","hidden");var b=document.getElementById("controls");b.removeAttribute("class"),UI.unbind_btn_events(),UI.btn_functions.options_open=!1}else{var a=document.getElementById("menu");a.removeAttribute("class");var b=document.getElementById("controls");b.setAttribute("class","open"),UI.bind_btn_events(),UI.btn_functions.options_open=!0}},randomize:function(){Colors.random_color(),Cycle.cycle_favs&&(Cycle.cycle_favs=!1,Cycle.cycle_random=!0,UI.btns.cycleFavs.innerHTML="cycle favs",UI.btns.cycleRand.innerHTML="&#10003; cycle random",Cycle.reset())},save_fav:function(){var a=document.getElementById("color-confirm");a.setAttribute("class","confirm"),UI.btn_functions.pause()},save_fav_yes:function(){var a={b:bg,l:live,d:dead,d2:dead2,d3:dead3};favorites.array.push(a),Colors.save_ls();var b=document.getElementById("color-confirm");b.setAttribute("class","confirm hidden"),UI.btn_functions.pause()},save_fav_no:function(){var a=document.getElementById("color-confirm");a.setAttribute("class","confirm hidden"),UI.btn_functions.pause()},next_fav:function(){Colors.next_fav(),Cycle.cycle_random&&(Cycle.cycle_favs=!0,Cycle.cycle_random=!1,UI.btns.cycleFavs.innerHTML="&#10003; cycle favs",UI.btns.cycleRand.innerHTML="cycle random",Cycle.reset())},del_fav:function(){var a=document.getElementById("delete-confirm");a.setAttribute("class","confirm"),UI.btn_functions.pause()},del_fav_yes:function(){favorites.array.splice(Colors.favIndex,1),favorites.array.length<1&&(Colors.favIndex=0,Colors.set_default()),Colors.save_ls(),Colors.next_fav();var a=document.getElementById("delete-confirm");a.setAttribute("class","confirm hidden"),UI.btn_functions.pause()},del_fav_no:function(){var a=document.getElementById("delete-confirm");a.setAttribute("class","confirm hidden"),UI.btn_functions.pause()},cycle_favs:function(){Cycle.cycle_favs?(Cycle.cycle_favs=!1,this.innerHTML="cycle favs",UI.btns.cycleRand.innerHTML="cycle random",clearInterval(cycleInt),clearInterval(cycleCounterInt),UI.btns.countdown.innerHTML="next: 0s"):(Cycle.cycle_favs=!0,Cycle.cycle_random=!1,this.innerHTML="&#10003; cycle favs",UI.btns.cycleRand.innerHTML="cycle random",Cycle.reset()),Colors.go_next()},cycle_rand:function(){Cycle.cycle_random?(Cycle.cycle_random=!1,this.innerHTML="cycle random",UI.btns.cycleFavs.innerHTML="cycle favs",clearInterval(cycleInt),clearInterval(cycleCounterInt),UI.btns.countdown.innerHTML="next: 0s"):(Cycle.cycle_random=!0,Cycle.cycle_favs=!1,this.innerHTML="&#10003; cycle random",UI.btns.cycleFavs.innerHTML="cycle favs",Cycle.reset()),Colors.go_next()},cycle_speed:function(){Cycle.intIndex<Cycle.intervals.length-1?Cycle.intIndex+=1:Cycle.intIndex=0,Cycle.reset()},pause:function(){pause?(GoL.start(),pause=!1,Cycle.reset(),this.innerHTML="pause"):(GoL.stop(),pause=!0,Cycle.pause(),this.innerHTML="play")}},init:function(){UI.btns.randomize=document.getElementById("randomize"),UI.btns.options=document.getElementById("options-btn"),UI.btns.save=document.getElementById("save-fav"),UI.btns.saveYes=document.getElementById("color-yes"),UI.btns.saveNo=document.getElementById("color-no"),UI.btns.next=document.getElementById("next-fav"),UI.btns.delete=document.getElementById("delete-fav"),UI.btns.delYes=document.getElementById("delete-yes"),UI.btns.delNo=document.getElementById("delete-no"),UI.btns.cycleFavs=document.getElementById("cycle-favs"),UI.btns.cycleRand=document.getElementById("cycle-random"),UI.btns.cycleSpeed=document.getElementById("cycle-speed"),UI.btns.pause=document.getElementById("pause"),UI.btns.countdown=document.getElementById("countdown")},bind_btn_events:function(){UI.btns.randomize.addEventListener("click",UI.btn_functions.randomize,!1),UI.btns.save.addEventListener("click",UI.btn_functions.save_fav,!1),UI.btns.saveYes.addEventListener("click",UI.btn_functions.save_fav_yes,!1),UI.btns.saveNo.addEventListener("click",UI.btn_functions.save_fav_no,!1),UI.btns.save.innerHTML="save fav ("+favorites.array.length+")",UI.btns.next.addEventListener("click",UI.btn_functions.next_fav,!1),UI.btns.delete.addEventListener("click",UI.btn_functions.del_fav,!1),UI.btns.delYes.addEventListener("click",UI.btn_functions.del_fav_yes,!1),UI.btns.delNo.addEventListener("click",UI.btn_functions.del_fav_no,!1),UI.btns.cycleFavs.addEventListener("click",UI.btn_functions.cycle_favs,!1),UI.btns.cycleRand.addEventListener("click",UI.btn_functions.cycle_rand,!1),UI.btns.cycleSpeed.addEventListener("click",UI.btn_functions.cycle_speed,!1),UI.btns.pause.addEventListener("click",UI.btn_functions.pause,!1)},unbind_btn_events:function(){UI.btns.randomize.removeEventListener("click",UI.btn_functions.randomize,!1),UI.btns.save.removeEventListener("click",UI.btn_functions.save_fav,!1),UI.btns.saveYes.removeEventListener("click",UI.btn_functions.save_fav_yes,!1),UI.btns.saveNo.removeEventListener("click",UI.btn_functions.save_fav_no,!1),UI.btns.next.removeEventListener("click",UI.btn_functions.next_fav,!1),UI.btns.delete.removeEventListener("click",UI.btn_functions.del_fav,!1),UI.btns.delYes.removeEventListener("click",UI.btn_functions.del_fav_yes,!1),UI.btns.delNo.removeEventListener("click",UI.btn_functions.del_fav_no,!1),UI.btns.cycleFavs.removeEventListener("click",UI.btn_functions.cycle_favs,!1),UI.btns.cycleRand.removeEventListener("click",UI.btn_functions.cycle_rand,!1),UI.btns.cycleSpeed.removeEventListener("click",UI.btn_functions.cycle_speed,!1),UI.btns.pause.removeEventListener("click",UI.btn_functions.pause,!1)}},Colors={favIndex:0,go_next:function(){Cycle.cycle_favs?Colors.next_fav():Cycle.cycle_random&&Colors.random_color()},next_fav:function(){Colors.favIndex<favorites.array.length-1?Colors.favIndex+=1:Colors.favIndex=0,bg=favorites.array[Colors.favIndex].b,live=favorites.array[Colors.favIndex].l,dead=favorites.array[Colors.favIndex].d,dead2=favorites.array[Colors.favIndex].d2,dead3=favorites.array[Colors.favIndex].d3,Cycle.reset()},random_color:function(){bg=[Math.floor(random(0,255)),Math.floor(random(0,255)),Math.floor(random(0,255))],live=[Math.floor(random(0,255)),Math.floor(random(0,255)),Math.floor(random(0,255))],dead=[Math.floor(random(0,255)),Math.floor(random(0,255)),Math.floor(random(0,255))],dead2=[Math.floor(Number(dead[0]+(bg[0]-dead[0])*(1/3))),Math.floor(Number(dead[1]+(bg[1]-dead[1])*(1/3))),Math.floor(Number(dead[2]+(bg[2]-dead[2])*(1/3)))],dead3=[Math.floor(Number(dead[0]+(bg[0]-dead[0])*(2/3))),Math.floor(Number(dead[1]+(bg[1]-dead[1])*(2/3))),Math.floor(Number(dead[2]+(bg[2]-dead[2])*(2/3)))],Cycle.reset()},set_default:function(){bg=[255,255,255],live=[0,0,0],dead=[255,0,0],dead2=[Math.floor(Number(dead[0]+(bg[0]-dead[0])*(1/3))),Math.floor(Number(dead[1]+(bg[1]-dead[1])*(1/3))),Math.floor(Number(dead[2]+(bg[2]-dead[2])*(1/3)))],dead3=[Math.floor(Number(dead[0]+(bg[0]-dead[0])*(2/3))),Math.floor(Number(dead[1]+(bg[1]-dead[1])*(2/3))),Math.floor(Number(dead[2]+(bg[2]-dead[2])*(2/3)))],favorites={array:[{b:bg,l:live,d:dead,d2:dead2,d3:dead3}]},Colors.save_ls()},save_ls:function(){var a=JSON.stringify(favorites);window.localStorage.setItem("GoL_colors",a),UI.btns.save.innerHTML="save fav ("+favorites.array.length+")"}},Cycle={cycle_favs:!0,cycle_random:!1,intervals:[5e3,1e4,2e4,3e4,6e4],intLabels:["5s","10s","20s","30s","60s"],intIndex:1,counter:0,reset:function(){clearInterval(cycleInt),cycleInt=setInterval(Colors.go_next,Cycle.intervals[Cycle.intIndex]),UI.btns.cycleSpeed.innerHTML="cycle speed "+Cycle.intLabels[Cycle.intIndex],Cycle.reset_counter()},update_counter:function(){Cycle.counter!==Cycle.intervals[Cycle.intIndex]?Cycle.counter+=1e3:Cycle.counter=0;var a=(Cycle.intervals[Cycle.intIndex]-Cycle.counter)/1e3;UI.btns.countdown.innerHTML="next: "+a+"s"},reset_counter:function(){Cycle.counter=0;var a=(Cycle.intervals[Cycle.intIndex]-Cycle.counter)/1e3;UI.btns.countdown.innerHTML="next: "+a+"s",clearInterval(cycleCounterInt),cycleCounterInt=setInterval(Cycle.update_counter,1e3)},pause:function(){clearInterval(cycleInt),clearInterval(cycleCounterInt)}},cycleInt=setInterval(Colors.go_next,Cycle.intervals[Cycle.intIndex]),cycleCounterInt=setInterval(Cycle.update_counter,1e3);