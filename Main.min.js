var width=320,height=200,unit=4,total=width*height,world=[],world2=[],fps=12,playing,canvas,ctx,goL={init:function(){canvas=document.getElementById("stage"),ctx=canvas.getContext("2d"),canvas.width=width*unit,canvas.height=height*unit;for(var t=0;total>t;t++){var r=0==Math.floor(2*Math.random());r?world.push(0):world.push(1),t===total-1&&(console.log("ready"),world2=world.slice(),goL.render(),goL.start())}},render:function(){ctx.clearRect(0,0,width*unit,height*unit);for(var t=0;t<world.length;t++){var r=Math.floor(t/width)*unit,o=Math.floor(t%width)*unit;0===world[t]?ctx.fillStyle="rgb(255,255,255)":ctx.fillStyle="rgb(0,0,0)",ctx.fillRect(o,r,unit,unit)}fps||window.requestAnimationFrame(goL.render)},parse_world:function(){world2=world.slice();for(var t=0;t<world.length;t++){var r=t-1,o=t+1,l=t-width,d=t-width-1,w=t-width+1,i=t+width,n=t+width-1,e=t+width+1,a=world[r]>=0?world[r]:0,h=world[o]>=0?world[o]:0,c=world[l]>=0?world[l]:0,s=world[d]>=0?world[d]:0,g=world[w]>=0?world[w]:0,u=world[i]>=0?world[i]:0,f=world[n]>=0?world[n]:0,v=world[e]>=0?world[e]:0,p=a+h+c+s+g+u+f+v;0===world[t]?3===p&&(world2[t]=1):(2>p||p>3)&&(world2[t]=0),t===world.length-1&&(world=world2.slice(),goL.render())}},start:function(){fps?setTimeout(function(){playing=setInterval(goL.parse_world,fps)},1e3):window.requestAnimationFrame(goL.parse_world)},stop:function(){clearInterval(playing)}};