function hatch(){for(var a=new RegExp("00.{"+(width-2)+"}00","g"),b=world.join(""),c=[];null!=(match=a.exec(b));)c.push(match.index);b=null,eggs5=eggs4.slice(),eggs4=eggs3.slice(),eggs3=eggs2.slice(),eggs2=eggs1.slice(),eggs1=c.slice();for(var d=[],e=0;e<eggs1.length;e++){var f=eggs2.indexOf(eggs1[e])>-1?1:0,g=eggs3.indexOf(eggs1[e])>-1?1:0,h=eggs4.indexOf(eggs1[e])>-1?1:0,i=eggs5.indexOf(eggs1[e])>-1?1:0,j=f+g+h+i;4===j&&d.push(eggs1[e])}if(d.length>0){var k=Math.floor(d.length/2);hRow=Math.floor(d[k]/width),hCol=Math.floor(d[k]%width);for(var e=0;e<world.length;e++){var l=Math.floor(e/width),m=Math.floor(e%width);l!==hRow&&m!==hCol||(world[e]=0)}}}var unit=8;window.innerHeight>1280&&(unit=Math.floor(8*window.innerHeight/1280)),window.innerWidth>1280&&(unit=Math.floor(8*window.innerWidth/1280));var width=Math.floor(window.innerWidth/unit),height=Math.floor(window.innerHeight/unit),total=width*height,world=[],fps=10,playing,canvas,ctx,counter=0,eggs1=[],eggs2=[],eggs3=[],eggs4=[],eggs5=[],bg,live,dead,dead2,dead3,pause=!1,keyTo=[4,3,4,2,4,1,4,0,4,0],keyFrom=[4,4,3,3,2,2,1,1,0,0],GoL={render:function(){ctx.restore(),ctx.clearRect(0,0,width*unit,height*unit);for(var a=0;a<world.length;a++){var b=Math.floor(a/width)*unit,c=Math.floor(a%width)*unit,d=keyTo[world[a]];switch(d){case 0:ctx.fillStyle="rgb("+bg[0]+","+bg[1]+","+bg[2]+")";break;case 1:ctx.fillStyle="rgb("+dead3[0]+","+dead3[1]+","+dead3[2]+")";break;case 2:ctx.fillStyle="rgb("+dead2[0]+","+dead2[1]+","+dead2[2]+")";break;case 3:ctx.fillStyle="rgb("+dead[0]+","+dead[1]+","+dead[2]+")";break;case 4:ctx.fillStyle="rgb("+live[0]+","+live[1]+","+live[2]+")"}ctx.fillRect(c,b,unit,unit)}fps||window.requestAnimationFrame(GoL.parse_world)},parse_world:function(){for(var a=0;a<world.length;a++){for(var b=a-width-1,c=a-width,d=a-width+1,e=a-1,f=a+1,g=a+width-1,h=a+width,i=a+width+1,j=[b,c,d,e,f,g,h,i],k=0,l=0;l<j.length;l++){if(j[l]>=0&&j[l]<=world.length)var m=j[l];else if(j[l]<0)var m=j[l]+world.length;else if(j[l]>world.length)var m=j[l]-world.length;if(l<4)var n=keyFrom[world[m]]>3?1:0;else var n=keyTo[world[m]]>3?1:0;k+=n}var o=keyTo[world[a]],p=keyTo[world[a]];switch(p<4?3===k?o=4:0!==world[a]&&(o-=1):(k<2||k>3)&&(o=3),p){case 4:4===o?world[a]=0:3===o&&(world[a]=1);break;case 3:4===o?world[a]=2:2===o&&(world[a]=3);break;case 2:4===o?world[a]=4:1===o&&(world[a]=5);break;case 1:4===o?world[a]=6:0===o&&(world[a]=7);break;case 0:4===o?world[a]=8:0===o&&(world[a]=9)}}counter<100?counter+=1:(hatch(),counter=0),GoL.render()},start:function(){fps?playing=setInterval(GoL.parse_world,1e3/fps):window.requestAnimationFrame(GoL.parse_world)},stop:function(){clearInterval(playing)}};